context: {}
entries:
- attrs:
    authentication: require_unauthenticated
    compatibility_mode: true
    denied_action: message_continue
    designation: authentication
    layout: sidebar_left
    name: Passwordless Login
    policy_engine_mode: any
    title: Passwordless login
  conditions: []
  identifiers:
    pk: d81de7fd-d5b0-4a40-97d8-26cc12dce757
    slug: metropolis-passwordless-authentication
  model: authentik_flows.flow
  permissions: []
  state: present
- attrs:
    expression: "if ak_user_has_authenticator(context['pending_user'], 'webauthn'):\n\
      \  return False\nreturn True"
    name: metropolis-authentication-redirect
  conditions: []
  identifiers:
    pk: 8c7a7057-4454-46bf-a1c2-f0ae1c5ac5db
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    expression: "if (context[\"geoip\"][\"country\"] == \"GB\"):\n  ak_message(\"\
      United Kingdom IP addresses are not allowed.\")\n  return False\nreturn True"
    name: metropolis-geoip
  conditions: []
  identifiers:
    pk: d8f2c3f7-7c4a-42c3-8f8a-61e9f1b138d8
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    expression: return not request.context["pending_user"].is_active
    name: metropolis-is-inactive
  conditions: []
  identifiers:
    pk: 62404968-48eb-4264-a8f6-3963096a02b8
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    expression: "if not ak_is_group_member(request.context[\"pending_user\"], name=\"\
      metropolis-banned\"):\n  return True\nak_message(\"Account banned.\")\nreturn\
      \ False"
    name: metropolis-is-not-banned
  conditions: []
  identifiers:
    pk: 39ca87cb-0967-4c4d-a96e-336f109abc7d
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    expression: "if request.context[\"pending_user\"].attributes[\"passwordless-auth\"\
      ] == \"Yes\":\n  return False\nreturn True"
    name: metropolis-password-authentication-redirect
  conditions: []
  identifiers:
    pk: a97b7a50-7981-4ca0-b978-c083170b53e8
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    keep_context: true
    mode: flow
    target_flow: e5cc7728-7f4c-4a90-b484-3662b831b0c9
  conditions: []
  identifiers:
    name: metropolis-authentication-redirect
    pk: 012231fd-b52c-4f5c-a177-1d94ebf28535
  model: authentik_stages_redirect.redirectstage
  permissions: []
  state: present
- attrs:
    case_insensitive_matching: true
    enable_remember_me: true
    enrollment_flow: cf997b2c-1614-4b5d-9555-c1a029f0144f
    pretend_user_exists: true
    recovery_flow: 7fe2c5b3-5ea4-4cb6-b18c-ea409d6f1b1e
    user_fields:
    - username
    - email
  conditions: []
  identifiers:
    name: metropolis-passwordless-authentication-identification
    pk: 19ecf1a9-2dd3-41de-862f-6f67676a8814
  model: authentik_stages_identification.identificationstage
  permissions: []
  state: present
- attrs:
    activate_user_on_success: true
    from_address: system@authentik.local
    host: localhost
    port: 25
    recovery_cache_timeout: minutes=5
    recovery_max_attempts: 5
    subject: authentik
    template: email/account_confirmation.html
    timeout: 10
    token_expiry: minutes=30
    use_global_settings: true
  conditions: []
  identifiers:
    name: default-enrollment-email-verification
    pk: 21ad4cb9-70af-4caa-94e1-7589541ed2eb
  model: authentik_stages_email.emailstage
  permissions: []
  state: present
- attrs:
    geoip_binding: no_binding
    network_binding: no_binding
    remember_device: days=30
    remember_me_offset: seconds=0
    session_duration: seconds=0
  conditions: []
  identifiers:
    name: default-authentication-login
    pk: 48fd229c-991d-4270-ba74-571ffaee45ae
  model: authentik_stages_user_login.userloginstage
  permissions: []
  state: present
- attrs:
    keep_context: true
    mode: flow
    target_flow: 7cf8b943-717c-42e3-9995-cefba0fa1a23
  conditions: []
  identifiers:
    name: metropolis-password-authentication-redirect
    pk: 2c5fc8aa-a24d-4fb8-b2b6-9f9a0198e495
  model: authentik_stages_redirect.redirectstage
  permissions: []
  state: present
- attrs:
    device_classes:
    - webauthn
    last_auth_threshold: seconds=0
    not_configured_action: deny
    webauthn_user_verification: required
  conditions: []
  identifiers:
    name: metropolis-authentication-webauthn-validation
    pk: 42fabd17-c0c0-4235-9059-b8b5771c4949
  model: authentik_stages_authenticator_validate.authenticatorvalidatestage
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 10
    pk: 4006d61a-3294-4394-814e-d9f075139eed
    stage: 19ecf1a9-2dd3-41de-862f-6f67676a8814
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 20
    pk: 13ea9e37-e63f-4b74-9d72-197713511429
    stage: 21ad4cb9-70af-4caa-94e1-7589541ed2eb
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 30
    pk: be506146-8793-4949-932a-8fbb2f8084c1
    stage: 012231fd-b52c-4f5c-a177-1d94ebf28535
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 40
    pk: e19f3884-e7bc-4b52-9f32-8a0e5debbecf
    stage: 42fabd17-c0c0-4235-9059-b8b5771c4949
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 50
    pk: 36f41ade-187e-4620-82fa-991883b21ace
    stage: 2c5fc8aa-a24d-4fb8-b2b6-9f9a0198e495
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 100
    pk: e7641b50-db4a-4be5-ae3a-f2daf65ac54d
    stage: 48fd229c-991d-4270-ba74-571ffaee45ae
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    enabled: true
    timeout: 30
  conditions: []
  identifiers:
    order: 0
    pk: 36eb575e-ce95-4398-a66d-dba785e88de9
    policy: 39ca87cb-0967-4c4d-a96e-336f109abc7d
    target: e7641b50-db4a-4be5-ae3a-f2daf65ac54d
  model: authentik_policies.policybinding
  permissions: []
  state: present
- attrs:
    enabled: true
    timeout: 30
  conditions: []
  identifiers:
    order: 0
    pk: df8aea5e-2ed4-4017-bac7-1c51efc357f4
    policy: 62404968-48eb-4264-a8f6-3963096a02b8
    target: 13ea9e37-e63f-4b74-9d72-197713511429
  model: authentik_policies.policybinding
  permissions: []
  state: present
- attrs:
    enabled: true
    timeout: 30
  conditions: []
  identifiers:
    order: 0
    pk: 25c07c4a-0b4e-41f6-ab17-b06ae1eafe04
    policy: 8c7a7057-4454-46bf-a1c2-f0ae1c5ac5db
    target: be506146-8793-4949-932a-8fbb2f8084c1
  model: authentik_policies.policybinding
  permissions: []
  state: present
- attrs:
    enabled: true
    timeout: 30
  conditions: []
  identifiers:
    order: 0
    pk: 551baaae-a59c-4e78-8bcc-5103d5e9a91b
    policy: d8f2c3f7-7c4a-42c3-8f8a-61e9f1b138d8
    target: d81de7fd-d5b0-4a40-97d8-26cc12dce757
  model: authentik_policies.policybinding
  permissions: []
  state: present
- attrs:
    enabled: true
    timeout: 30
  conditions: []
  identifiers:
    order: 0
    pk: c30b7a20-e57b-4ebe-bec8-1247bc359f6c
    policy: a97b7a50-7981-4ca0-b978-c083170b53e8
    target: 36f41ade-187e-4620-82fa-991883b21ace
  model: authentik_policies.policybinding
  permissions: []
  state: present
metadata:
  labels:
    blueprints.goauthentik.io/generated: 'true'
  name: authentik Export - 2025-09-22 14:08:47.085968+00:00
version: 1
