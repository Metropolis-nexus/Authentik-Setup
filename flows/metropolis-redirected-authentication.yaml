context: {}
entries:
- attrs:
    authentication: require_redirect
    background: ''
    compatibility_mode: true
    denied_action: message_continue
    designation: authentication
    layout: sidebar_left
    name: Standard Authentication
    policy_engine_mode: any
    title: Standard Authentication
  conditions: []
  identifiers:
    pk: e5cc7728-7f4c-4a90-b484-3662b831b0c9
    slug: metropolis-redirected-authentication
  model: authentik_flows.flow
  permissions: []
  state: present
- attrs:
    execution_logging: false
    expression: "if ak_is_group_member(request.context[\"pending_user\"], name=\"\
      metropolis_banned\"):\n  ak_message(\"Account banned.\")\n  return False\nelif\
      \ ak_is_group_member(request.context[\"pending_user\"], name=\"metropolis_reserved\"\
      ):\n  ak_message(\"Account reserved. How did you even get this far?!\")\n  return\
      \ False\nreturn True"
    name: metropolis-is-not-banned-or-reserved
  conditions: []
  identifiers:
    pk: 39ca87cb-0967-4c4d-a96e-336f109abc7d
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    execution_logging: false
    expression: "flow_plan = request.context.get(\"flow_plan\")\nif not flow_plan:\n\
      \    return True\n# if the authentication method is webauthn (passwordless),\
      \ then we skip the authenticator\n# validation stage by returning false (true\
      \ will execute the stage)\nreturn not (flow_plan.context.get(\"auth_method\"\
      ) == \"auth_webauthn_pwl\")"
    name: default-authentication-flow-authenticator-validate-stage
  conditions: []
  identifiers:
    pk: 01f271ec-0053-47d7-b720-322270238134
  model: authentik_policies_expression.expressionpolicy
  permissions: []
  state: present
- attrs:
    configuration_stages:
    - 4fecd0f4-9337-4a1b-a013-569b46f12553
    - d2a8dbb9-cba9-4f48-9b24-ce0b4230090b
    - 7e63dc6a-28a4-4e83-a6a3-99e3046ae46b
    device_classes:
    - totp
    - webauthn
    last_auth_threshold: seconds=0
    not_configured_action: configure
    webauthn_allowed_device_types: []
    webauthn_user_verification: required
  conditions: []
  identifiers:
    name: metropolis-authentication-mfa-validation
    pk: 2f72067b-d309-41df-bc02-eaf04227da02
  model: authentik_stages_authenticator_validate.authenticatorvalidatestage
  permissions: []
  state: present
- attrs:
    allow_show_password: true
    backends:
    - authentik.core.auth.InbuiltBackend
    - authentik.sources.kerberos.auth.KerberosBackend
    - authentik.sources.ldap.auth.LDAPBackend
    - authentik.core.auth.TokenBackend
    configure_flow: 949453e8-c583-432b-94ba-29e11fba065d
    failed_attempts_before_cancel: 5
  conditions: []
  identifiers:
    name: default-authentication-password
    pk: 46323292-891f-447b-9ade-a99fac127bd6
  model: authentik_stages_password.passwordstage
  permissions: []
  state: present
- attrs:
    geoip_binding: no_binding
    network_binding: no_binding
    remember_device: days=30
    remember_me_offset: days=30
    session_duration: seconds=0
    terminate_other_sessions: false
  conditions: []
  identifiers:
    name: metropolis-authentication-login
    pk: 4b789328-2779-4273-8b85-70bdb9cf28f9
  model: authentik_stages_user_login.userloginstage
  permissions: []
  state: present
- attrs:
    evaluate_on_plan: false
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 40
    pk: 19f780e5-567b-4a34-84bb-fa44d4f8e915
    stage: 46323292-891f-447b-9ade-a99fac127bd6
    target: e5cc7728-7f4c-4a90-b484-3662b831b0c9
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    evaluate_on_plan: false
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 50
    pk: 1ac6ec8b-bb36-47d1-b073-9ff7e969b6b3
    stage: 2f72067b-d309-41df-bc02-eaf04227da02
    target: e5cc7728-7f4c-4a90-b484-3662b831b0c9
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    evaluate_on_plan: false
    invalid_response_action: retry
    policy_engine_mode: any
    re_evaluate_policies: true
  conditions: []
  identifiers:
    order: 100
    pk: b1224dd7-a96b-41a4-a00f-7dad0eb2110a
    stage: 4b789328-2779-4273-8b85-70bdb9cf28f9
    target: e5cc7728-7f4c-4a90-b484-3662b831b0c9
  model: authentik_flows.flowstagebinding
  permissions: []
  state: present
- attrs:
    enabled: true
    failure_result: false
    group: null
    negate: false
    timeout: 30
    user: null
  conditions: []
  identifiers:
    order: 0
    pk: b61db80e-d84c-409e-af43-685411d72272
    policy: 01f271ec-0053-47d7-b720-322270238134
    target: 1ac6ec8b-bb36-47d1-b073-9ff7e969b6b3
  model: authentik_policies.policybinding
  permissions: []
  state: present
- attrs:
    enabled: true
    failure_result: false
    group: null
    negate: false
    timeout: 30
    user: null
  conditions: []
  identifiers:
    order: 0
    pk: ad001ae6-fba9-4431-a213-9873fd5e9805
    policy: 39ca87cb-0967-4c4d-a96e-336f109abc7d
    target: b1224dd7-a96b-41a4-a00f-7dad0eb2110a
  model: authentik_policies.policybinding
  permissions: []
  state: present
metadata:
  labels:
    blueprints.goauthentik.io/generated: 'true'
  name: authentik Export - 2026-02-28 07:20:46.639571+00:00
version: 1
